<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Horario IES PIO BAROJA</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&family=Quicksand:wght@500;700&family=Orbitron:wght@900&display=swap');

  /* --- 1. ESTILOS GENERALES Y FONDO --- */
  body {
    margin: 0;
    padding: 0; /* Quitamos padding del body para que el header toque los bordes si es necesario */
    font-family: 'Quicksand', sans-serif;
    background-color: #f7fcfc;
    background-image: radial-gradient(#e0f7fa 10%, transparent 11%), radial-gradient(#e0f7fa 10%, transparent 11%);
    background-size: 60px 60px;
    background-position: 0 0, 30px 30px;
    min-height: 100vh;
  }

  /* Contenedor principal adaptable */
  .main-container {
    width: 100%;
    max-width: 1100px; /* Ancho por defecto (mÃ³vil/tablet) */
    margin: 20px auto;
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    overflow: hidden; /* Mantiene bordes redondeados */
    border: 3px solid #C62828;
    display: flex;
    flex-direction: column;
  }

  /* --- 2. CABECERA (TÃ­tulos) - AHORA FIJA --- */
  .header-section {
    background: #C62828;
    padding: 15px 10px;
    text-align: center;
    position: sticky; /* HACE QUE SE QUEDE FIJA */
    top: 0;
    z-index: 1000; /* Asegura que estÃ© por encima del contenido al hacer scroll */
    box-shadow: 0 4px 10px rgba(0,0,0,0.3); /* Sombra para resaltar que flota */
  }
  
  .header-section::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 8px;
    background: repeating-linear-gradient(45deg, #FFD700, #FFD700 10px, #FDB813 10px, #FDB813 20px);
  }

  .curved-title-svg {
    width: 100%;
    max-width: 400px; /* Un poco mÃ¡s pequeÃ±o para ahorrar espacio vertical */
    height: auto;
    display: block;
    margin: 0 auto;
  }
  .curved-text-path { fill: transparent; }
  .curved-text {
      fill: white;
      font-family: 'Mountains of Christmas', cursive;
      font-weight: bold;
      font-size: 45px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  }

  .subtitle-striking {
    font-family: 'Orbitron', sans-serif;
    color: #FFD700;
    font-size: 1.3em;
    margin: 5px 0 5px 0;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 2px 2px 0px #7f0000;
  }
  
  /* --- 3. BARRA DE FILTRADO --- */
  .filter-bar {
    background-color: #fff;
    padding: 15px;
    border-bottom: 2px solid #eee;
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap; 
  }

  .filter-input-group {
    display: flex;
    flex-direction: column;
    flex: 1; 
    min-width: 200px; 
  }

  .filter-label {
    font-size: 0.8em;
    font-weight: bold;
    color: #C62828;
    margin-bottom: 3px;
  }

  .filter-control {
    padding: 8px;
    border: 2px solid #eee;
    border-radius: 8px;
    font-family: 'Quicksand', sans-serif;
    outline: none;
    transition: border-color 0.3s;
    width: 100%;
    box-sizing: border-box; /* Asegura que el padding no rompa el ancho */
  }
  .filter-control:focus { border-color: #C62828; }

  /* --- 4. GRID DEL HORARIO --- */
  .schedule-grid {
    display: grid;
    grid-template-columns: 110px 1fr 1fr; /* Ajustado */
    width: 100%;
  }

  /* Header Verde de la Tabla */
  .grid-header { display: contents; }
  .grid-header-cell {
    background-color: #2E7D32;
    color: white;
    padding: 10px;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 0.85em;
    border-right: 1px solid #1b5e20;
    display: flex; align-items: center; justify-content: center;
  }

  /* Filas */
  .grid-row-trigger { display: contents; cursor: pointer; }
  .grid-cell {
    padding: 10px;
    border-bottom: 1px solid #eee;
    border-right: 1px solid #eee;
    display: flex; align-items: center;
    background-color: #fff;
    transition: background-color 0.2s;
    font-size: 0.95em;
  }
  .grid-row-trigger:hover .grid-cell { background-color: #FFF8E1 !important; }
  /* Alternancia de colores (zebra) se maneja diferente en JS columns, pero dejamos esto por si acaso */
  
  .time-badge { background-color: #C62828; color: white; padding: 4px 8px; border-radius: 12px; font-weight: bold; font-size: 0.8em; white-space: nowrap; }
  .activity-name { font-weight: 700; color: #333; }
  .place-name { color: #666; font-style: italic; }

  /* --- 5. DETALLES --- */
  .detail-panel {
    grid-column: 1 / -1; 
    background-color: #f9fbe7;
    border-bottom: 2px solid #C62828;
    max-height: 0; 
    overflow: hidden;
    transition: max-height 0.3s ease-out, opacity 0.3s ease-out, padding 0.3s;
    opacity: 0;
  }
  .detail-panel.active {
    padding: 15px;
    max-height: 500px;
    opacity: 1;
    border-left: 5px solid #2E7D32;
  }
  .detail-item { margin-bottom: 5px; display: flex; align-items: center; flex-wrap: wrap;}
  .detail-icon { margin-right: 8px; font-size: 1.2em; }
  
  .action-button {
    display: inline-block; margin-top: 5px; padding: 8px 15px;
    background-color: #C62828; color: white; text-decoration: none;
    border-radius: 20px; font-weight: bold; font-size: 0.9em;
    border: none; cursor: pointer;
  }
  .action-button:hover { background-color: #b71c1c; transform: translateY(-2px); }
  .map-button { background-color: #1976D2; }
  .map-button:hover { background-color: #1565C0; }
  .filtered-out { display: none !important; }

  /* ==========================================================================
     NUEVO: ESTILOS PARA ESCRITORIO (WEB) - DOBLE COLUMNA Y ANIMACIÃ“N
     ========================================================================== */
  @media screen and (min-width: 1024px) {
    /* 1. Estirar el contenedor principal */
    .main-container {
        max-width: 98%; /* Ocupa casi toda la pantalla */
        margin: 10px auto;
        border: none; /* Quitamos borde exterior para look "full screen" o lo dejamos a gusto */
        border-top: 3px solid #C62828; /* Mantenemos borde arriba */
    }

    /* 2. Filtros estirados */
    .filter-bar {
        justify-content: space-between; /* Estira los elementos */
    }

    /* 3. Contenedor dividido (Generado por JS) */
    #desktop-split-wrapper {
        display: grid;
        grid-template-columns: 1fr 1fr; /* Dos columnas iguales (50% - 50%) */
        gap: 20px; /* Espacio entre las dos columnas */
        padding: 20px;
        background-color: white;
    }

    /* Columna Izquierda */
    .split-col-left {
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
    }

    /* Columna Derecha con la ANIMACIÃ“N DE SLEEP/TRANSICIÃ“N */
    .split-col-right {
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        
        /* ESTA ES LA MAGIA DE LA ANIMACIÃ“N */
        opacity: 0; /* Empieza invisible */
        /* NombreAnimaciÃ³n | DuraciÃ³n | Curva | Retardo(Sleep) | EstadoFinal */
        animation: slideInFade 0.8s ease-out 1s forwards; 
    }

    /* Ajuste de la grid interna cuando estÃ¡ dividida */
    .schedule-grid {
        /* Se adapta al ancho de su columna padre */
    }
  }

  /* AnimaciÃ³n para la columna derecha */
  @keyframes slideInFade {
      from {
          opacity: 0;
          transform: translateX(20px); /* Viene un poco de la derecha */
      }
      to {
          opacity: 1;
          transform: translateX(0);
      }
  }

  /* --- MÃ“VIL (Mantiene diseÃ±o original) --- */
  @media screen and (max-width: 768px) {
    .curved-text { font-size: 38px; }
    .filter-bar { flex-direction: column; gap: 10px; }
    .schedule-grid { grid-template-columns: 1fr; }
    .grid-header { display: none; } /* Ocultar cabecera verde en mÃ³vil */
    .grid-cell { border-right: none; padding: 8px 15px; }
    .grid-row-trigger .grid-cell:first-child { padding-top: 15px; }
    .grid-row-trigger .grid-cell:last-child { padding-bottom: 15px; border-bottom: 2px solid #ddd; }
    .activity-name { font-size: 1.2em; }
    
    /* Desactivar el wrapper de escritorio si se redimensiona */
    #desktop-split-wrapper {
        display: block; /* Volver a flujo normal si falla algo */
    }
  }
</style>
</head>
<body>

<div class="main-container">
  <div class="header-section">
    <svg class="curved-title-svg" viewBox="0 0 500 120" xmlns="http://www.w3.org/2000/svg">
        <path id="curvePath" d="M50,100 Q250,20 450,100" class="curved-text-path" />
        <text class="curved-text">
            <textPath xlink:href="#curvePath" startOffset="50%" text-anchor="middle">
                IES PIO BAROJA
            </textPath>
        </text>
    </svg>
    <h2 class="subtitle-striking">ğŸ„ Gran Fiesta de Navidad ğŸ…</h2>
    <div style="color: #fff; font-weight: bold; font-size: 0.9em;">Â¡Haz clic en las filas para ver detalles!</div>
  </div>

  <div class="filter-bar">
    <div class="filter-input-group">
      <label class="filter-label" for="filter-time">Filtrar por Hora:</label>
      <select id="filter-time" class="filter-control">
        <option value="">Todas las horas</option>
      </select>
    </div>
    <div class="filter-input-group">
        <label class="filter-label" for="filter-activity">Buscar Actividad:</label>
        <input type="text" id="filter-activity" class="filter-control" placeholder="Ej: Kahoot, Baile...">
      </div>
    <div class="filter-input-group">
      <label class="filter-label" for="filter-place">Filtrar por Lugar:</label>
      <select id="filter-place" class="filter-control">
        <option value="">Todos los lugares</option>
      </select>
    </div>
  </div>

  <div id="original-content-wrapper">
      <div class="schedule-grid" id="schedule-grid-container">
        <div class="grid-header" id="master-header">
          <div class="grid-header-cell">Horario</div>
          <div class="grid-header-cell">Actividad</div>
          <div class="grid-header-cell">Lugar</div>
        </div>

        <div class="grid-row-trigger js-filterable" data-time="09:00" data-place="Hall del ACE">
          <div class="grid-cell"><span class="time-badge">09:00 - 10:00</span></div>
          <div class="grid-cell"><span class="activity-name">â˜• Chocolatada</span></div>
          <div class="grid-cell"><span class="place-name">Hall del ACE</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
          <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1Âº, 2Âº PPME JardinerÃ­a</strong></div>
        </div></div>

        <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="Aula B.3">
          <div class="grid-cell"><span class="time-badge">09:30 - 10:30</span></div>
          <div class="grid-cell"><span class="activity-name">ğŸ•µï¸â€â™‚ï¸ Juego del Impostor</span></div>
          <div class="grid-cell"><span class="place-name">Aula B.3</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
           <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1Âº DAW BilingÃ¼e</strong></div>
        </div></div>

        <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="Gimnasio">
          <div class="grid-cell"><span class="time-badge">09:30 - 11:15</span></div>
          <div class="grid-cell"><span class="activity-name">ğŸŒŸ Got Talent (Festival)</span></div>
          <div class="grid-cell"><span class="place-name">Gimnasio</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>Ciclo TSEAS (1Âº y 2Âº)</strong></div>
        </div></div>

        <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="Aula 2.6">
          <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
          <div class="grid-cell"><span class="activity-name">ğŸ° Casino Online</span></div>
          <div class="grid-cell"><span class="place-name">Aula 2.6</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1Âº DAM</strong></div>
        </div></div>

        <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="B11">
            <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸµ Bingo musical</span></div>
            <div class="grid-cell"><span class="place-name">Aula B11</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1Âº A E Infantil</strong></div>
          </div></div>
      
          <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="2.2">
            <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸ§µ Taller de pulseras y premios</span></div>
            <div class="grid-cell"><span class="place-name">Aula 2.2</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>2Âº APSD</strong></div>
            <div class="detail-item">â€œImpostor navideÃ±o con premioâ€</div>
          </div></div>
      
          <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="2.4">
            <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸ¤ Karaoke</span></div>
            <div class="grid-cell"><span class="place-name">Aula 2.4</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1ÂºB E Infantil</strong></div>
          </div></div>
      
          <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="1.18">
            <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸ•º Discopio</span></div>
            <div class="grid-cell"><span class="place-name">Aula 1.18</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>2Âº E Infantil</strong></div>
          </div></div>
      
          <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="1.4">
            <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸ’ƒ Karaoke + Justdance</span></div>
            <div class="grid-cell"><span class="place-name">Aula 1.4</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1Âº IntegraciÃ³n Social</strong></div>
          </div></div>
      
          <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="2.2">
            <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸ¤Ÿ Villancicos lengua de signos</span></div>
            <div class="grid-cell"><span class="place-name">Aula 2.2</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1Âº MediaciÃ³n Comunicativa</strong></div>
          </div></div>
      
          <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="B13">
            <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸ„ Ãrbol deseos / Just dance</span></div>
            <div class="grid-cell"><span class="place-name">Aula B13</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1Âº APSD</strong></div>
            <div class="detail-item">Just dance con premios navideÃ±os</div>
          </div></div>
      
          <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="1.16">
            <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸ¶ â€œCantas y te la sabesâ€</span></div>
            <div class="grid-cell"><span class="place-name">Aula 1.16</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>2ÂºA EI</strong></div>
          </div></div>
      
          <div class="grid-row-trigger js-filterable" data-time="09:30" data-place="1.2">
            <div class="grid-cell"><span class="time-badge">09:30 - 11:30</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸŒš La Noche Oscura (Pueblo duerme)</span></div>
            <div class="grid-cell"><span class="place-name">Aula 1.2</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1ÂºA Int. Social</strong></div>
            <div class="detail-item">VersiÃ³n NavideÃ±a</div>
          </div></div>

        <div class="grid-row-trigger js-filterable" data-time="10:00" data-place="Aula B.5">
          <div class="grid-cell"><span class="time-badge">10:00 - 10:30</span></div>
          <div class="grid-cell"><span class="activity-name">ğŸ¤ Batalla de Gallos</span></div>
          <div class="grid-cell"><span class="place-name">Aula B.5</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
          <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>2Âº SMR</strong></div>
          <div class="detail-item">Â¡Demuestra tu talento! InscrÃ­bete para participar.</div>
          <a href="https://forms.gle/VCT2gh9hTaQYD5fC7" target="_blank" class="action-button">ğŸ“ Formulario de InscripciÃ³n</a>
        </div></div>

        <div class="grid-row-trigger js-filterable" data-time="10:00" data-place="1.14">
          <div class="grid-cell"><span class="time-badge">10:00 - 12:00</span></div>
          <div class="grid-cell"><span class="activity-name">ğŸ·ï¸ Adivina la marca / TabÃº</span></div>
          <div class="grid-cell"><span class="place-name">Aula 1.14</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>2Âº CI</strong></div>
        </div></div>

         <div class="grid-row-trigger js-filterable" data-time="10:00" data-place="1.12">
            <div class="grid-cell"><span class="time-badge">10:00 - 12:00</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸŒ Kahoot Viaje por el mundo</span></div>
            <div class="grid-cell"><span class="place-name">Aula 1.12</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
              <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1 CI</strong></div>
          </div></div>

        <div class="grid-row-trigger js-filterable" data-time="10:00" data-place="1.8">
          <div class="grid-cell"><span class="time-badge">10:00 - 12:00</span></div>
          <div class="grid-cell"><span class="activity-name">ğŸ•µï¸â€â™€ï¸ Juego El Impostor</span></div>
          <div class="grid-cell"><span class="place-name">Aula 1.8</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>2 GM Act. Comerciales</strong></div>
        </div></div>

        <div class="grid-row-trigger js-filterable" data-time="10:00" data-place="1.10">
            <div class="grid-cell"><span class="time-badge">10:00 - 12:00</span></div>
            <div class="grid-cell"><span class="activity-name">ğŸ™ˆ Juego Manos Ciegas</span></div>
            <div class="grid-cell"><span class="place-name">Aula 1.10</span></div>
          </div>
          <div class="detail-panel"><div class="detail-content">
              <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>1 GM Act. Comerciales</strong></div>
          </div></div>

        <div class="grid-row-trigger js-filterable" data-time="10:00" data-place="1.9 - 1.11">
          <div class="grid-cell"><span class="time-badge">10:00 - 12:00</span></div>
          <div class="grid-cell"><span class="activity-name">ğŸ¶ Karaoke</span></div>
          <div class="grid-cell"><span class="place-name">Aula 1.9 - 1.11</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
            <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>2 FB Serv. Comerciales</strong></div>
        </div></div>

        <div class="grid-row-trigger js-filterable" data-time="11:45" data-place="Calle Lateral">
          <div class="grid-cell"><span class="time-badge">11:45 - 12:30</span></div>
          <div class="grid-cell"><span class="activity-name">ğŸ‘‘ Cabalgata</span></div>
          <div class="grid-cell"><span class="place-name">Calle Lateral del Centro</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
          <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>Ciclo TSEAS</strong></div>
          <div class="detail-item">Â¡No te pierdas el gran desfile!</div>
          <a href="https://maps.app.goo.gl/nrKx5KtrSPZdWkKU6" target="_blank" class="action-button map-button">ğŸ“ Ver UbicaciÃ³n en Maps</a>
        </div></div>

        <div class="grid-row-trigger js-filterable" data-time="Varios" data-place="Gimnasio">
          <div class="grid-cell"><span class="time-badge" style="background-color: #2E7D32;">Durante la maÃ±ana</span></div>
          <div class="grid-cell"><span class="activity-name">ğŸ­ Actuaciones Varias (1-7)</span></div>
          <div class="grid-cell"><span class="place-name">Gimnasio</span></div>
        </div>
        <div class="detail-panel"><div class="detail-content">
          <div class="detail-item"><span class="detail-icon">ğŸ‘¥</span>Grupo: <strong>Ciclo TSEAS</strong></div>
          <div class="detail-item"><span class="detail-icon">â°</span>Estas actuaciones tendrÃ¡n lugar a lo largo de la maÃ±ana en el gimnasio, intercaladas con el festival principal.</div>
        </div></div>
      </div>
  </div> 
</div> 

<script>
  document.addEventListener('DOMContentLoaded', function() {
    
    // --- LÃ“GICA DE INTERACTIVIDAD (ACORDEÃ“N) ---
    const triggers = document.querySelectorAll('.grid-row-trigger');
    triggers.forEach(trigger => {
      trigger.addEventListener('click', () => {
        const activeTriggers = document.querySelectorAll('.grid-row-trigger.active-row');
        activeTriggers.forEach(at => {
            if(at !== trigger) {
                at.classList.remove('active-row');
                at.nextElementSibling.classList.remove('active');
            }
        });

        const detailPanel = trigger.nextElementSibling;
        trigger.classList.toggle('active-row');
        detailPanel.classList.toggle('active');
      });
    });

    // --- LÃ“GICA DE FILTRADO ---
    const filterTimeSelect = document.getElementById('filter-time');
    const filterActivityInput = document.getElementById('filter-activity');
    const filterPlaceSelect = document.getElementById('filter-place');
    const filterableRows = document.querySelectorAll('.js-filterable');

    function populateSelectors() {
        let times = new Set();
        let places = new Set();

        filterableRows.forEach(row => {
            times.add(row.getAttribute('data-time'));
            let placeText = row.querySelector('.grid-cell:nth-child(3) .place-name').textContent.trim();
            places.add(placeText);
        });

        times.forEach(time => {
            let option = document.createElement('option');
            option.value = time; option.textContent = time;
            filterTimeSelect.appendChild(option);
        });
        places.forEach(place => {
            let option = document.createElement('option');
            option.value = place.toLowerCase(); option.textContent = place;
            filterPlaceSelect.appendChild(option);
        });
    }

    function filterGrid() {
        const timeValue = filterTimeSelect.value;
        const activityValue = filterActivityInput.value.toLowerCase().trim();
        const placeValue = filterPlaceSelect.value;

        filterableRows.forEach(row => {
            const rowTime = row.getAttribute('data-time');
            const rowActivityText = row.querySelector('.grid-cell:nth-child(2)').textContent.toLowerCase();
            const rowPlaceText = row.querySelector('.grid-cell:nth-child(3)').textContent.toLowerCase().trim();
            const detailPanel = row.nextElementSibling;

            const matchesTime = timeValue === "" || rowTime === timeValue;
            const matchesActivity = activityValue === "" || rowActivityText.includes(activityValue);
            const matchesPlace = placeValue === "" || rowPlaceText.includes(placeValue);

            if (matchesTime && matchesActivity && matchesPlace) {
                row.classList.remove('filtered-out');
            } else {
                row.classList.add('filtered-out');
                row.classList.remove('active-row');
                detailPanel.classList.remove('active');
            }
        });
    }

    populateSelectors();
    filterTimeSelect.addEventListener('change', filterGrid);
    filterActivityInput.addEventListener('input', filterGrid);
    filterPlaceSelect.addEventListener('change', filterGrid);

    // --- NUEVO: LÃ“GICA PARA DIVIDIR EN COLUMNAS EN ESCRITORIO ---
    function splitLayoutForDesktop() {
        // Solo ejecutar si la pantalla es ancha (> 1024px)
        if (window.innerWidth < 1024) return;

        const originalWrapper = document.getElementById('original-content-wrapper');
        const gridContainer = document.getElementById('schedule-grid-container');
        
        // Si ya lo hicimos, no repetir
        if(document.getElementById('desktop-split-wrapper')) return;

        // Crear contenedor Grid de 2 columnas
        const splitWrapper = document.createElement('div');
        splitWrapper.id = 'desktop-split-wrapper';

        // Columnas
        const colLeft = document.createElement('div');
        colLeft.className = 'split-col-left schedule-grid';
        
        const colRight = document.createElement('div');
        colRight.className = 'split-col-right schedule-grid';

        // Obtener el Header Maestro
        const masterHeader = document.getElementById('master-header');
        
        // Clonar Header para ambas columnas
        const headerLeft = masterHeader.cloneNode(true);
        const headerRight = masterHeader.cloneNode(true);
        headerRight.style.display = 'contents'; // Asegurar display correcto
        headerLeft.style.display = 'contents';

        colLeft.appendChild(headerLeft);
        colRight.appendChild(headerRight);

        // Recoger todos los pares (trigger + panel)
        const allTriggers = Array.from(document.querySelectorAll('.js-filterable'));
        const totalItems = allTriggers.length;
        const midPoint = Math.ceil(totalItems / 2);

        // Mover elementos a las columnas correspondientes
        allTriggers.forEach((trigger, index) => {
            const panel = trigger.nextElementSibling; // El panel de detalles
            
            if (index < midPoint) {
                colLeft.appendChild(trigger);
                colLeft.appendChild(panel);
            } else {
                colRight.appendChild(trigger);
                colRight.appendChild(panel);
            }
        });

        // Insertar las columnas en el wrapper
        splitWrapper.appendChild(colLeft);
        splitWrapper.appendChild(colRight);

        // Ocultar el grid original y aÃ±adir el nuevo
        gridContainer.style.display = 'none';
        originalWrapper.appendChild(splitWrapper);
    }

    // Ejecutar al cargar
    splitLayoutForDesktop();

    // Reajustar si cambian el tamaÃ±o de ventana
    window.addEventListener('resize', () => {
        if(window.innerWidth < 1024) {
             const splitWrapper = document.getElementById('desktop-split-wrapper');
             if(splitWrapper) {
                 // Si se hace pequeÃ±o, podrÃ­amos necesitar recargar la pÃ¡gina para restaurar
                 // o mover los elementos de vuelta. Para simplificar, recargamos si se pasa de desktop a movil
                 // location.reload(); // Opcional
             }
        } else {
            splitLayoutForDesktop();
        }
    });

  });
</script>

</body>
</html>
